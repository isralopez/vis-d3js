"undefined"==typeof Map&&(Map=function(){this.clear()},Map.prototype={set:function(e,n){return this._[e]=n,this},get:function(e){return this._[e]},has:function(e){return e in this._},"delete":function(e){return e in this._&&delete this._[e]},clear:function(){this._=Object.create(null)},get size(){var e=0;for(var n in this._)++e;return e},forEach:function(e){for(var n in this._)e(this._[n],n,this)}}),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.xhr={})}(this,function(e){"use strict";function n(e,n){return function(t){return e.parse(t.responseText,n)}}function t(e){return function(n,t){e(null==n?t:null)}}function r(e){var n=e.responseType;return n&&"text"!==n?e.response:e.responseText}function o(e){function n(e){var n=(e+="").indexOf("."),t=e;if(n>=0?e=e.slice(0,n):t+=".",e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}function t(e){return function(){for(var n,t,r=i[e],o=-1,u=r.length;++o<u;)(t=(n=r[o]).value)&&t.apply(this,arguments);return c}}var r,o=-1,u=e.length,i={},a={},c=this;for(c.on=function(e,t){if(e=n(e),arguments.length<2)return(t=a[e.name])&&t.value;if(e.type){var r,o=i[e.type],u=a[e.name];u&&(u.value=null,r=o.indexOf(u),i[e.type]=o=o.slice(0,r).concat(o.slice(r+1)),delete a[e.name]),t&&(t={value:t},a[e.name]=t,o.push(t))}else if(null==t)for(var s in i)if(t=a[s+e.name]){t.value=null;var o=i[s],r=o.indexOf(t);i[s]=o.slice(0,r).concat(o.slice(r+1)),delete a[t.name]}return c};++o<u;){if(r=e[o]+"",!r||r in c)throw new Error("illegal or duplicate type: "+r);i[r]=[],c[r]=t(r)}}function u(){return new o(arguments)}var i=function(e){function n(e,n){var r;return t(e,function(e,t){if(r)return r(e,t-1);var o=new Function("d","return {"+e.map(function(e,n){return JSON.stringify(e)+": d["+n+"]"}).join(",")+"}");r=n?function(e,t){return n(o(e),t)}:o})}function t(e,n){function t(){if(f>=s)return i;if(o)return o=!1,u;var n=f;if(34===e.charCodeAt(n)){for(var t=n;t++<s;)if(34===e.charCodeAt(t)){if(34!==e.charCodeAt(t+1))break;++t}f=t+2;var r=e.charCodeAt(t+1);return 13===r?(o=!0,10===e.charCodeAt(t+2)&&++f):10===r&&(o=!0),e.slice(n+1,t).replace(/""/g,'"')}for(;s>f;){var r=e.charCodeAt(f++),a=1;if(10===r)o=!0;else if(13===r)o=!0,10===e.charCodeAt(f)&&(++f,++a);else if(r!==c)continue;return e.slice(n,f-a)}return e.slice(n)}for(var r,o,u={},i={},a=[],s=e.length,f=0,l=0;(r=t())!==i;){for(var p=[];r!==u&&r!==i;)p.push(r),r=t();n&&null==(p=n(p,l++))||a.push(p)}return a}function r(n){if(Array.isArray(n[0]))return o(n);var t=Object.create(null),r=[];return n.forEach(function(e){for(var n in e)(n+="")in t||r.push(t[n]=n)}),[r.map(i).join(e)].concat(n.map(function(n){return r.map(function(e){return i(n[e])}).join(e)})).join("\n")}function o(e){return e.map(u).join("\n")}function u(n){return n.map(i).join(e)}function i(e){return a.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var a=new RegExp('["'+e+"\n]"),c=e.charCodeAt(0);return{parse:n,parseRows:t,format:r,formatRows:o}},a=i("	");u.prototype=o.prototype;var c=function(e,n){function o(){var e,n=p.status;if(!n&&r(p)||n>=200&&300>n||304===n){if(c)try{e=c.call(i,p)}catch(t){return void f.error.call(i,t)}else e=p;f.load.call(i,e)}else f.error.call(i,p)}var i,a,c,s,f=u("beforesend","progress","load","error"),l=new Map,p=new XMLHttpRequest;return"undefined"==typeof XDomainRequest||"withCredentials"in p||!/^(http(s)?:)?\/\//.test(e)||(p=new XDomainRequest),"onload"in p?p.onload=p.onerror=o:p.onreadystatechange=function(){p.readyState>3&&o()},p.onprogress=function(e){f.progress.call(i,e)},i={header:function(e,n){return e=(e+"").toLowerCase(),arguments.length<2?l.get(e):(null==n?l["delete"](e):l.set(e,n+""),i)},mimeType:function(e){return arguments.length?(a=null==e?null:e+"",i):a},responseType:function(e){return arguments.length?(s=e,i):s},response:function(e){return c=e,i},get:function(e,n){return i.send("GET",e,n)},post:function(e,n){return i.send("POST",e,n)},send:function(n,r,o){return o||"function"!=typeof r||(o=r,r=null),o&&1===o.length&&(o=t(o)),p.open(n,e,!0),null==a||l.has("accept")||l.set("accept",a+",*/*"),p.setRequestHeader&&l.forEach(function(e,n){p.setRequestHeader(n,e)}),null!=a&&p.overrideMimeType&&p.overrideMimeType(a),null!=s&&(p.responseType=s),o&&i.on("error",o).on("load",function(e){o(null,e)}),f.beforesend.call(i,p),p.send(null==r?null:r),i},abort:function(){return p.abort(),i},on:function(){var e=f.on.apply(f,arguments);return e===f?i:e}},n?i.get(n):i},s=function(e,t){return function(r,o,u){arguments.length<3&&(u=o,o=null);var i=c(r).mimeType(e);return i.row=function(e){return arguments.length?i.response(n(t,o=e)):o},i.row(o),u?i.get(u):i}},f=s("text/tab-separated-values",a),l=i(","),p=s("text/csv",l),h=function(e,n){return function(t,r){var o=c(t).mimeType(e).response(n);return r?o.get(r):o}},d=h("application/xml",function(e){return e.responseXML}),m=h("text/plain",function(e){return e.responseText}),v=h("application/json",function(e){return JSON.parse(e.responseText)}),g=h("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)});e.xhr=c,e.html=g,e.json=v,e.text=m,e.xml=d,e.csv=p,e.tsv=f});